"use strict";function q(a){throw a;}var t=void 0,u=!1;var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return"CORRUPT: "+this.message};this.message=a},invalid:function(a){this.toString=function(){return"INVALID: "+this.message};this.message=a},bug:function(a){this.toString=function(){return"BUG: "+this.message};this.message=a},notReady:function(a){this.toString=function(){return"NOT READY: "+this.message};this.message=a}}};
"undefined"!=typeof module&&module.exports&&(module.exports=sjcl);
sjcl.cipher.aes=function(a){this.j[0][0][0]||this.D();var b,c,d,e,f=this.j[0][4],g=this.j[1];b=a.length;var h=1;4!==b&&(6!==b&&8!==b)&&q(new sjcl.exception.invalid("invalid aes key size"));this.a=[d=a.slice(0),e=[]];for(a=b;a<4*b+28;a++){c=d[a-1];if(0===a%b||8===b&&4===a%b)c=f[c>>>24]<<24^f[c>>16&255]<<16^f[c>>8&255]<<8^f[c&255],0===a%b&&(c=c<<8^c>>>24^h<<24,h=h<<1^283*(h>>7));d[a]=d[a-b]^c}for(b=0;a;b++,a--)c=d[b&3?a:a-4],e[b]=4>=a||4>b?c:g[0][f[c>>>24]]^g[1][f[c>>16&255]]^g[2][f[c>>8&255]]^g[3][f[c&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(a){return y(this,a,0)},decrypt:function(a){return y(this,a,1)},j:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){var a=this.j[0],b=this.j[1],c=a[4],d=b[4],e,f,g,h=[],l=[],k,n,m,p;for(e=0;0x100>e;e++)l[(h[e]=e<<1^283*(e>>7))^e]=e;for(f=g=0;!c[f];f^=k||1,g=l[g]||1){m=g^g<<1^g<<2^g<<3^g<<4;m=m>>8^m&255^99;c[f]=m;d[m]=f;n=h[e=h[k=h[f]]];p=0x1010101*n^0x10001*e^0x101*k^0x1010100*f;n=0x101*h[m]^0x1010100*m;for(e=0;4>e;e++)a[e][f]=n=n<<24^n>>>8,b[e][m]=p=p<<24^p>>>8}for(e=
0;5>e;e++)a[e]=a[e].slice(0),b[e]=b[e].slice(0)}};
function y(a,b,c){4!==b.length&&q(new sjcl.exception.invalid("invalid aes block size"));var d=a.a[c],e=b[0]^d[0],f=b[c?3:1]^d[1],g=b[2]^d[2];b=b[c?1:3]^d[3];var h,l,k,n=d.length/4-2,m,p=4,s=[0,0,0,0];h=a.j[c];a=h[0];var r=h[1],v=h[2],w=h[3],x=h[4];for(m=0;m<n;m++)h=a[e>>>24]^r[f>>16&255]^v[g>>8&255]^w[b&255]^d[p],l=a[f>>>24]^r[g>>16&255]^v[b>>8&255]^w[e&255]^d[p+1],k=a[g>>>24]^r[b>>16&255]^v[e>>8&255]^w[f&255]^d[p+2],b=a[b>>>24]^r[e>>16&255]^v[f>>8&255]^w[g&255]^d[p+3],p+=4,e=h,f=l,g=k;for(m=0;4>
m;m++)s[c?3&-m:m]=x[e>>>24]<<24^x[f>>16&255]<<16^x[g>>8&255]<<8^x[b&255]^d[p++],h=e,e=f,f=g,g=b,b=h;return s}
sjcl.bitArray={bitSlice:function(a,b,c){a=sjcl.bitArray.O(a.slice(b/32),32-(b&31)).slice(1);return c===t?a:sjcl.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d=Math.floor(-b-c&31);return((b+c-1^b)&-32?a[b/32|0]<<32-d^a[b/32+1|0]>>>d:a[b/32|0]>>>d)&(1<<c)-1},concat:function(a,b){if(0===a.length||0===b.length)return a.concat(b);var c=a[a.length-1],d=sjcl.bitArray.getPartial(c);return 32===d?a.concat(b):sjcl.bitArray.O(b,d,c|0,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length;return 0===
b?0:32*(b-1)+sjcl.bitArray.getPartial(a[b-1])},clamp:function(a,b){if(32*a.length<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;b&=31;0<c&&b&&(a[c-1]=sjcl.bitArray.partial(b,a[c-1]&2147483648>>b-1,1));return a},partial:function(a,b,c){return 32===a?b:(c?b|0:b<<32-a)+0x10000000000*a},getPartial:function(a){return Math.round(a/0x10000000000)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return u;var c=0,d;for(d=0;d<a.length;d++)c|=a[d]^b[d];return 0===
c},O:function(a,b,c,d){var e;e=0;for(d===t&&(d=[]);32<=b;b-=32)d.push(c),c=0;if(0===b)return d.concat(a);for(e=0;e<a.length;e++)d.push(c|a[e]>>>b),c=a[e]<<32-b;e=a.length?a[a.length-1]:0;a=sjcl.bitArray.getPartial(e);d.push(sjcl.bitArray.partial(b+a&31,32<b+a?c:d.pop(),1));return d},k:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}};
sjcl.codec.utf8String={fromBits:function(a){var b="",c=sjcl.bitArray.bitLength(a),d,e;for(d=0;d<c/8;d++)0===(d&3)&&(e=a[d/4]),b+=String.fromCharCode(e>>>24),e<<=8;return decodeURIComponent(escape(b))},toBits:function(a){a=unescape(encodeURIComponent(a));var b=[],c,d=0;for(c=0;c<a.length;c++)d=d<<8|a.charCodeAt(c),3===(c&3)&&(b.push(d),d=0);c&3&&b.push(sjcl.bitArray.partial(8*(c&3),d));return b}};
sjcl.codec.hex={fromBits:function(a){var b="",c;for(c=0;c<a.length;c++)b+=((a[c]|0)+0xf00000000000).toString(16).substr(4);return b.substr(0,sjcl.bitArray.bitLength(a)/4)},toBits:function(a){var b,c=[],d;a=a.replace(/\s|0x/g,"");d=a.length;a+="00000000";for(b=0;b<a.length;b+=8)c.push(parseInt(a.substr(b,8),16)^0);return sjcl.bitArray.clamp(c,4*d)}};
sjcl.codec.base64={I:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(a,b,c){var d="",e=0,f=sjcl.codec.base64.I,g=0,h=sjcl.bitArray.bitLength(a);c&&(f=f.substr(0,62)+"-_");for(c=0;6*d.length<h;)d+=f.charAt((g^a[c]>>>e)>>>26),6>e?(g=a[c]<<6-e,e+=26,c++):(g<<=6,e-=6);for(;d.length&3&&!b;)d+="=";return d},toBits:function(a,b){a=a.replace(/\s|=/g,"");var c=[],d,e=0,f=sjcl.codec.base64.I,g=0,h;b&&(f=f.substr(0,62)+"-_");for(d=0;d<a.length;d++)h=f.indexOf(a.charAt(d)),
0>h&&q(new sjcl.exception.invalid("this isn't base64!")),26<e?(e-=26,c.push(g^h>>>e),g=h<<32-e):(e+=6,g^=h<<32-e);e&56&&c.push(sjcl.bitArray.partial(e&56,g,1));return c}};sjcl.codec.base64url={fromBits:function(a){return sjcl.codec.base64.fromBits(a,1,1)},toBits:function(a){return sjcl.codec.base64.toBits(a,1)}};sjcl.hash.sha256=function(a){this.a[0]||this.D();a?(this.q=a.q.slice(0),this.m=a.m.slice(0),this.g=a.g):this.reset()};sjcl.hash.sha256.hash=function(a){return(new sjcl.hash.sha256).update(a).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.q=this.M.slice(0);this.m=[];this.g=0;return this},update:function(a){"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));var b,c=this.m=sjcl.bitArray.concat(this.m,a);b=this.g;a=this.g=b+sjcl.bitArray.bitLength(a);for(b=512+b&-512;b<=a;b+=512)z(this,c.splice(0,16));return this},finalize:function(){var a,b=this.m,c=this.q,b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]);for(a=b.length+2;a&15;a++)b.push(0);b.push(Math.floor(this.g/
4294967296));for(b.push(this.g|0);b.length;)z(this,b.splice(0,16));this.reset();return c},M:[],a:[],D:function(){function a(a){return 0x100000000*(a-Math.floor(a))|0}var b=0,c=2,d;a:for(;64>b;c++){for(d=2;d*d<=c;d++)if(0===c%d)continue a;8>b&&(this.M[b]=a(Math.pow(c,0.5)));this.a[b]=a(Math.pow(c,1/3));b++}}};
function z(a,b){var c,d,e,f=b.slice(0),g=a.q,h=a.a,l=g[0],k=g[1],n=g[2],m=g[3],p=g[4],s=g[5],r=g[6],v=g[7];for(c=0;64>c;c++)16>c?d=f[c]:(d=f[c+1&15],e=f[c+14&15],d=f[c&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+f[c&15]+f[c+9&15]|0),d=d+v+(p>>>6^p>>>11^p>>>25^p<<26^p<<21^p<<7)+(r^p&(s^r))+h[c],v=r,r=s,s=p,p=m+d|0,m=n,n=k,k=l,l=d+(k&n^m&(k^n))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;g[0]=g[0]+l|0;g[1]=g[1]+k|0;g[2]=g[2]+n|0;g[3]=g[3]+m|0;g[4]=g[4]+p|0;g[5]=g[5]+s|0;g[6]=
g[6]+r|0;g[7]=g[7]+v|0}
sjcl.mode.ccm={name:"ccm",encrypt:function(a,b,c,d,e){var f,g=b.slice(0),h=sjcl.bitArray,l=h.bitLength(c)/8,k=h.bitLength(g)/8;e=e||64;d=d||[];7>l&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes"));for(f=2;4>f&&k>>>8*f;f++);f<15-l&&(f=15-l);c=h.clamp(c,8*(15-f));b=sjcl.mode.ccm.K(a,b,c,d,e,f);g=sjcl.mode.ccm.n(a,g,c,b,e,f);return h.concat(g.data,g.tag)},decrypt:function(a,b,c,d,e){e=e||64;d=d||[];var f=sjcl.bitArray,g=f.bitLength(c)/8,h=f.bitLength(b),l=f.clamp(b,h-e),k=f.bitSlice(b,
h-e),h=(h-e)/8;7>g&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes"));for(b=2;4>b&&h>>>8*b;b++);b<15-g&&(b=15-g);c=f.clamp(c,8*(15-b));l=sjcl.mode.ccm.n(a,l,c,k,e,b);a=sjcl.mode.ccm.K(a,l.data,c,d,e,b);f.equal(l.tag,a)||q(new sjcl.exception.corrupt("ccm: tag doesn't match"));return l.data},K:function(a,b,c,d,e,f){var g=[],h=sjcl.bitArray,l=h.k;e/=8;(e%2||4>e||16<e)&&q(new sjcl.exception.invalid("ccm: invalid tag length"));(0xffffffff<d.length||0xffffffff<b.length)&&q(new sjcl.exception.bug("ccm: can't deal with 4GiB or more data"));
f=[h.partial(8,(d.length?64:0)|e-2<<2|f-1)];f=h.concat(f,c);f[3]|=h.bitLength(b)/8;f=a.encrypt(f);if(d.length){c=h.bitLength(d)/8;65279>=c?g=[h.partial(16,c)]:0xffffffff>=c&&(g=h.concat([h.partial(16,65534)],[c]));g=h.concat(g,d);for(d=0;d<g.length;d+=4)f=a.encrypt(l(f,g.slice(d,d+4).concat([0,0,0])))}for(d=0;d<b.length;d+=4)f=a.encrypt(l(f,b.slice(d,d+4).concat([0,0,0])));return h.clamp(f,8*e)},n:function(a,b,c,d,e,f){var g,h=sjcl.bitArray;g=h.k;var l=b.length,k=h.bitLength(b);c=h.concat([h.partial(8,
f-1)],c).concat([0,0,0]).slice(0,4);d=h.bitSlice(g(d,a.encrypt(c)),0,e);if(!l)return{tag:d,data:[]};for(g=0;g<l;g+=4)c[3]++,e=a.encrypt(c),b[g]^=e[0],b[g+1]^=e[1],b[g+2]^=e[2],b[g+3]^=e[3];return{tag:d,data:h.clamp(b,k)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(a,b,c,d,e,f){128!==sjcl.bitArray.bitLength(c)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));var g,h=sjcl.mode.ocb2.G,l=sjcl.bitArray,k=l.k,n=[0,0,0,0];c=h(a.encrypt(c));var m,p=[];d=d||[];e=e||64;for(g=0;g+4<b.length;g+=4)m=b.slice(g,g+4),n=k(n,m),p=p.concat(k(c,a.encrypt(k(c,m)))),c=h(c);m=b.slice(g);b=l.bitLength(m);g=a.encrypt(k(c,[0,0,0,b]));m=l.clamp(k(m.concat([0,0,0]),g),b);n=k(n,k(m.concat([0,0,0]),g));n=a.encrypt(k(n,k(c,h(c))));d.length&&
(n=k(n,f?d:sjcl.mode.ocb2.pmac(a,d)));return p.concat(l.concat(m,l.clamp(n,e)))},decrypt:function(a,b,c,d,e,f){128!==sjcl.bitArray.bitLength(c)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));e=e||64;var g=sjcl.mode.ocb2.G,h=sjcl.bitArray,l=h.k,k=[0,0,0,0],n=g(a.encrypt(c)),m,p,s=sjcl.bitArray.bitLength(b)-e,r=[];d=d||[];for(c=0;c+4<s/32;c+=4)m=l(n,a.decrypt(l(n,b.slice(c,c+4)))),k=l(k,m),r=r.concat(m),n=g(n);p=s-32*c;m=a.encrypt(l(n,[0,0,0,p]));m=l(m,h.clamp(b.slice(c),p).concat([0,0,0]));
k=l(k,m);k=a.encrypt(l(k,l(n,g(n))));d.length&&(k=l(k,f?d:sjcl.mode.ocb2.pmac(a,d)));h.equal(h.clamp(k,e),h.bitSlice(b,s))||q(new sjcl.exception.corrupt("ocb: tag doesn't match"));return r.concat(h.clamp(m,p))},pmac:function(a,b){var c,d=sjcl.mode.ocb2.G,e=sjcl.bitArray,f=e.k,g=[0,0,0,0],h=a.encrypt([0,0,0,0]),h=f(h,d(d(h)));for(c=0;c+4<b.length;c+=4)h=d(h),g=f(g,a.encrypt(f(h,b.slice(c,c+4))));c=b.slice(c);128>e.bitLength(c)&&(h=f(h,d(h)),c=e.concat(c,[-2147483648,0,0,0]));g=f(g,c);return a.encrypt(f(d(f(h,
d(h))),g))},G:function(a){return[a[0]<<1^a[1]>>>31,a[1]<<1^a[2]>>>31,a[2]<<1^a[3]>>>31,a[3]<<1^135*(a[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(a,b,c,d,e){var f=b.slice(0);b=sjcl.bitArray;d=d||[];a=sjcl.mode.gcm.n(!0,a,f,d,c,e||128);return b.concat(a.data,a.tag)},decrypt:function(a,b,c,d,e){var f=b.slice(0),g=sjcl.bitArray,h=g.bitLength(f);e=e||128;d=d||[];e<=h?(b=g.bitSlice(f,h-e),f=g.bitSlice(f,0,h-e)):(b=f,f=[]);a=sjcl.mode.gcm.n(u,a,f,d,c,e);g.equal(a.tag,b)||q(new sjcl.exception.corrupt("gcm: tag doesn't match"));return a.data},U:function(a,b){var c,d,e,f,g,h=sjcl.bitArray.k;e=[0,0,0,0];f=b.slice(0);
for(c=0;128>c;c++){(d=0!==(a[Math.floor(c/32)]&1<<31-c%32))&&(e=h(e,f));g=0!==(f[3]&1);for(d=3;0<d;d--)f[d]=f[d]>>>1|(f[d-1]&1)<<31;f[0]>>>=1;g&&(f[0]^=-0x1f000000)}return e},f:function(a,b,c){var d,e=c.length;b=b.slice(0);for(d=0;d<e;d+=4)b[0]^=0xffffffff&c[d],b[1]^=0xffffffff&c[d+1],b[2]^=0xffffffff&c[d+2],b[3]^=0xffffffff&c[d+3],b=sjcl.mode.gcm.U(b,a);return b},n:function(a,b,c,d,e,f){var g,h,l,k,n,m,p,s,r=sjcl.bitArray;m=c.length;p=r.bitLength(c);s=r.bitLength(d);h=r.bitLength(e);g=b.encrypt([0,
0,0,0]);96===h?(e=e.slice(0),e=r.concat(e,[1])):(e=sjcl.mode.gcm.f(g,[0,0,0,0],e),e=sjcl.mode.gcm.f(g,e,[0,0,Math.floor(h/0x100000000),h&0xffffffff]));h=sjcl.mode.gcm.f(g,[0,0,0,0],d);n=e.slice(0);d=h.slice(0);a||(d=sjcl.mode.gcm.f(g,h,c));for(k=0;k<m;k+=4)n[3]++,l=b.encrypt(n),c[k]^=l[0],c[k+1]^=l[1],c[k+2]^=l[2],c[k+3]^=l[3];c=r.clamp(c,p);a&&(d=sjcl.mode.gcm.f(g,h,c));a=[Math.floor(s/0x100000000),s&0xffffffff,Math.floor(p/0x100000000),p&0xffffffff];d=sjcl.mode.gcm.f(g,d,a);l=b.encrypt(e);d[0]^=l[0];
d[1]^=l[1];d[2]^=l[2];d[3]^=l[3];return{tag:r.bitSlice(d,0,f),data:c}}};sjcl.misc.hmac=function(a,b){this.L=b=b||sjcl.hash.sha256;var c=[[],[]],d,e=b.prototype.blockSize/32;this.o=[new b,new b];a.length>e&&(a=b.hash(a));for(d=0;d<e;d++)c[0][d]=a[d]^909522486,c[1][d]=a[d]^1549556828;this.o[0].update(c[0]);this.o[1].update(c[1])};sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(a){a=(new this.L(this.o[0])).update(a).finalize();return(new this.L(this.o[1])).update(a).finalize()};
sjcl.misc.pbkdf2=function(a,b,c,d,e){c=c||1E3;(0>d||0>c)&&q(sjcl.exception.invalid("invalid params to pbkdf2"));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));e=e||sjcl.misc.hmac;a=new e(a);var f,g,h,l,k=[],n=sjcl.bitArray;for(l=1;32*k.length<(d||1);l++){e=f=a.encrypt(n.concat(b,[l]));for(g=1;g<c;g++){f=a.encrypt(f);for(h=0;h<f.length;h++)e[h]^=f[h]}k=k.concat(e)}d&&(k=n.clamp(k,d));return k};
sjcl.prng=function(a){this.b=[new sjcl.hash.sha256];this.h=[0];this.F=0;this.t={};this.C=0;this.J={};this.N=this.c=this.i=this.T=0;this.a=[0,0,0,0,0,0,0,0];this.e=[0,0,0,0];this.A=t;this.B=a;this.p=u;this.z={progress:{},seeded:{}};this.l=this.S=0;this.u=1;this.w=2;this.Q=0x10000;this.H=[0,48,64,96,128,192,0x100,384,512,768,1024];this.R=3E4;this.P=80};
sjcl.prng.prototype={randomWords:function(a,b){var c=[],d;d=this.isReady(b);var e;d===this.l&&q(new sjcl.exception.notReady("generator isn't seeded"));if(d&this.w){d=!(d&this.u);e=[];var f=0,g;this.N=e[0]=(new Date).valueOf()+this.R;for(g=0;16>g;g++)e.push(0x100000000*Math.random()|0);for(g=0;g<this.b.length&&!(e=e.concat(this.b[g].finalize()),f+=this.h[g],this.h[g]=0,!d&&this.F&1<<g);g++);this.F>=1<<this.b.length&&(this.b.push(new sjcl.hash.sha256),this.h.push(0));this.c-=f;f>this.i&&(this.i=f);this.F++;
this.a=sjcl.hash.sha256.hash(this.a.concat(e));this.A=new sjcl.cipher.aes(this.a);for(d=0;4>d&&!(this.e[d]=this.e[d]+1|0,this.e[d]);d++);}for(d=0;d<a;d+=4)0===(d+1)%this.Q&&A(this),e=B(this),c.push(e[0],e[1],e[2],e[3]);A(this);return c.slice(0,a)},setDefaultParanoia:function(a){this.B=a},addEntropy:function(a,b,c){c=c||"user";var d,e,f=(new Date).valueOf(),g=this.t[c],h=this.isReady(),l=0;d=this.J[c];d===t&&(d=this.J[c]=this.T++);g===t&&(g=this.t[c]=0);this.t[c]=(this.t[c]+1)%this.b.length;switch(typeof a){case "number":b===
t&&(b=1);this.b[g].update([d,this.C++,1,b,f,1,a|0]);break;case "object":c=Object.prototype.toString.call(a);if("[object Uint32Array]"===c){e=[];for(c=0;c<a.length;c++)e.push(a[c]);a=e}else{"[object Array]"!==c&&(l=1);for(c=0;c<a.length&&!l;c++)"number"!=typeof a[c]&&(l=1)}if(!l){if(b===t)for(c=b=0;c<a.length;c++)for(e=a[c];0<e;)b++,e>>>=1;this.b[g].update([d,this.C++,2,b,f,a.length].concat(a))}break;case "string":b===t&&(b=a.length);this.b[g].update([d,this.C++,3,b,f,a.length]);this.b[g].update(a);
break;default:l=1}l&&q(new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string"));this.h[g]+=b;this.c+=b;h===this.l&&(this.isReady()!==this.l&&C("seeded",Math.max(this.i,this.c)),C("progress",this.getProgress()))},isReady:function(a){a=this.H[a!==t?a:this.B];return this.i&&this.i>=a?this.h[0]>this.P&&(new Date).valueOf()>this.N?this.w|this.u:this.u:this.c>=a?this.w|this.l:this.l},getProgress:function(a){a=this.H[a?a:this.B];return this.i>=a?1:this.c>a?1:this.c/
a},startCollectors:function(){this.p||(window.addEventListener?(window.addEventListener("load",this.r,u),window.addEventListener("mousemove",this.s,u)):document.attachEvent?(document.attachEvent("onload",this.r),document.attachEvent("onmousemove",this.s)):q(new sjcl.exception.bug("can't attach event")),this.p=!0)},stopCollectors:function(){this.p&&(window.removeEventListener?(window.removeEventListener("load",this.r,u),window.removeEventListener("mousemove",this.s,u)):window.detachEvent&&(window.detachEvent("onload",
this.r),window.detachEvent("onmousemove",this.s)),this.p=u)},addEventListener:function(a,b){this.z[a][this.S++]=b},removeEventListener:function(a,b){var c,d,e=this.z[a],f=[];for(d in e)e.hasOwnProperty(d)&&e[d]===b&&f.push(d);for(c=0;c<f.length;c++)d=f[c],delete e[d]},s:function(a){sjcl.random.addEntropy([a.x||a.clientX||a.offsetX||0,a.y||a.clientY||a.offsetY||0],2,"mouse")},r:function(){sjcl.random.addEntropy((new Date).valueOf(),2,"loadtime")}};
function C(a,b){var c,d=sjcl.random.z[a],e=[];for(c in d)d.hasOwnProperty(c)&&e.push(d[c]);for(c=0;c<e.length;c++)e[c](b)}function A(a){a.a=B(a).concat(B(a));a.A=new sjcl.cipher.aes(a.a)}function B(a){for(var b=0;4>b&&!(a.e[b]=a.e[b]+1|0,a.e[b]);b++);return a.A.encrypt(a.e)}sjcl.random=new sjcl.prng(6);try{var D=new Uint32Array(32);crypto.getRandomValues(D);sjcl.random.addEntropy(D,1024,"crypto['getRandomValues']")}catch(E){}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json,f=e.d({iv:sjcl.random.randomWords(4,0)},e.defaults),g;e.d(f,c);c=f.adata;"string"===typeof f.salt&&(f.salt=sjcl.codec.base64.toBits(f.salt));"string"===typeof f.iv&&(f.iv=sjcl.codec.base64.toBits(f.iv));(!sjcl.mode[f.mode]||!sjcl.cipher[f.cipher]||"string"===typeof a&&100>=f.iter||64!==f.ts&&96!==f.ts&&128!==f.ts||128!==f.ks&&192!==f.ks&&0x100!==f.ks||2>f.iv.length||
4<f.iv.length)&&q(new sjcl.exception.invalid("json encrypt: invalid parameters"));"string"===typeof a&&(g=sjcl.misc.cachedPbkdf2(a,f),a=g.key.slice(0,f.ks/32),f.salt=g.salt);"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));"string"===typeof c&&(c=sjcl.codec.utf8String.toBits(c));g=new sjcl.cipher[f.cipher](a);e.d(d,f);d.key=a;f.ct=sjcl.mode[f.mode].encrypt(g,b,f.iv,c,f.ts);return e.encode(f)},decrypt:function(a,b,c,d){c=c||{};d=d||{};var e=sjcl.json;b=e.d(e.d(e.d({},e.defaults),e.decode(b)),
c,!0);var f;c=b.adata;"string"===typeof b.salt&&(b.salt=sjcl.codec.base64.toBits(b.salt));"string"===typeof b.iv&&(b.iv=sjcl.codec.base64.toBits(b.iv));(!sjcl.mode[b.mode]||!sjcl.cipher[b.cipher]||"string"===typeof a&&100>=b.iter||64!==b.ts&&96!==b.ts&&128!==b.ts||128!==b.ks&&192!==b.ks&&0x100!==b.ks||!b.iv||2>b.iv.length||4<b.iv.length)&&q(new sjcl.exception.invalid("json decrypt: invalid parameters"));"string"===typeof a&&(f=sjcl.misc.cachedPbkdf2(a,b),a=f.key.slice(0,b.ks/32),b.salt=f.salt);"string"===
typeof c&&(c=sjcl.codec.utf8String.toBits(c));f=new sjcl.cipher[b.cipher](a);c=sjcl.mode[b.mode].decrypt(f,b.ct,b.iv,c,b.ts);e.d(d,b);d.key=a;return sjcl.codec.utf8String.fromBits(c)},encode:function(a){var b,c="{",d="";for(b in a)if(a.hasOwnProperty(b))switch(b.match(/^[a-z0-9]+$/i)||q(new sjcl.exception.invalid("json encode: invalid property name")),c+=d+'"'+b+'":',d=",",typeof a[b]){case "number":case "boolean":c+=a[b];break;case "string":c+='"'+escape(a[b])+'"';break;case "object":c+='"'+sjcl.codec.base64.fromBits(a[b],
0)+'"';break;default:q(new sjcl.exception.bug("json encode: unsupported type"))}return c+"}"},decode:function(a){a=a.replace(/\s/g,"");a.match(/^\{.*\}$/)||q(new sjcl.exception.invalid("json decode: this isn't json!"));a=a.replace(/^\{|\}$/g,"").split(/,/);var b={},c,d;for(c=0;c<a.length;c++)(d=a[c].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i))||q(new sjcl.exception.invalid("json decode: this isn't json!")),b[d[2]]=d[3]?parseInt(d[3],10):d[2].match(/^(ct|salt|iv)$/)?
sjcl.codec.base64.toBits(d[4]):unescape(d[4]);return b},d:function(a,b,c){a===t&&(a={});if(b===t)return a;for(var d in b)b.hasOwnProperty(d)&&(c&&(a[d]!==t&&a[d]!==b[d])&&q(new sjcl.exception.invalid("required parameter overridden")),a[d]=b[d]);return a},X:function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&a[d]!==b[d]&&(c[d]=a[d]);return c},W:function(a,b){var c={},d;for(d=0;d<b.length;d++)a[b[d]]!==t&&(c[b[d]]=a[b[d]]);return c}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;
sjcl.misc.V={};sjcl.misc.cachedPbkdf2=function(a,b){var c=sjcl.misc.V,d;b=b||{};d=b.iter||1E3;c=c[a]=c[a]||{};d=c[d]=c[d]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):sjcl.random.randomWords(2,0)};c=b.salt===t?d.firstSalt:b.salt;d[c]=d[c]||sjcl.misc.pbkdf2(a,c,b.iter);return{key:d[c].slice(0),salt:c.slice(0)}};
/* Riot v2.3.17, @license MIT */
!function(t,e){"use strict";function n(t,e,n){var r={};return r[t.key]=e,t.pos&&(r[t.pos]=n),r}function r(t,e){for(var n,r=e.length,o=t.length;r>o;)n=e[--r],e.splice(r,1),n.unmount()}function o(t,e){Object.keys(t.tags).forEach(function(n){var r=t.tags[n];O(r)?g(r,function(t){N(t,n,e)}):N(r,n,e)})}function i(t,e,n){var r,o=t._root;for(t._virts=[];o;)r=o.nextSibling,n?e.insertBefore(o,n._root):e.appendChild(o),t._virts.push(o),o=r}function u(t,e,n,r){for(var o,i=t._root,u=0;r>u;u++)o=i.nextSibling,e.insertBefore(i,n._root),i=o}function a(t,e,a){m(t,"each");var c,f=typeof b(t,"no-reorder")!==Y||m(t,"no-reorder"),l=S(t),p=Z[l]||{tmpl:t.outerHTML},d=nt.test(l),g=t.parentNode,h=document.createTextNode(""),v=w(t),y="option"===l.toLowerCase(),x=[],_=[],N="VIRTUAL"==t.tagName;a=ut.loopKeys(a),g.insertBefore(h,t),e.one("before-mount",function(){t.parentNode.removeChild(t),g.stub&&(g=e.root)}).on("update",function(){var m=ut(a.val,e),b=document.createDocumentFragment();O(m)||(c=m||!1,m=c?Object.keys(m).map(function(t){return n(a,t,m[t])}):[]);for(var w=0,C=m.length;C>w;w++){var L=m[w],S=f&&L instanceof Object&&!c,T=_.indexOf(L),M=~T&&S?T:w,A=x[M];L=!c&&a.key?n(a,L,w):L,!S&&!A||S&&!~T||!A?(A=new s(p,{parent:e,isLoop:!0,hasImpl:!!Z[l],root:d?g:t.cloneNode(),item:L},t.innerHTML),A.mount(),N&&(A._root=A.root.firstChild),w!=x.length&&x[w]?(N?i(A,g,x[w]):g.insertBefore(A.root,x[w].root),_.splice(w,0,L)):N?i(A,b):b.appendChild(A.root),x.splice(w,0,A),M=w):A.update(L,!0),M!==w&&S&&x[w]&&(N?u(A,g,x[w],t.childNodes.length):g.insertBefore(A.root,x[w].root),a.pos&&(A[a.pos]=w),x.splice(w,0,x.splice(M,1)[0]),_.splice(w,0,_.splice(M,1)[0]),!v&&A.tags&&o(A,w)),A._item=L,E(A,"_parent",e)}if(r(m,x),y){if(g.appendChild(b),g.length){var j,R=g.options;for(g.selectedIndex=j=-1,w=0;w<R.length;w++)(R[w].selected=R[w].__selected)&&0>j&&(g.selectedIndex=j=w)}}else g.insertBefore(b,h);v&&(e.tags[l]=x),_=m.slice()})}function c(t,e,n,r){R(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||b(t,"each")?1:0,n){var o=w(t);o&&!t.isLoop&&n.push(C(o,{root:t,parent:e},t.innerHTML,e))}t.isLoop&&!r||K(t,e,[])}})}function f(t,e,n){function r(t,e,r){ut.hasExpr(e)&&n.push(T({dom:t,expr:e},r))}R(t,function(t){var n,o=t.nodeType;return 3==o&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==o?(n=b(t,"each"))?(a(t,e,n),!1):(g(t.attributes,function(e){var n=e.name,o=n.split("__")[1];return r(t,e.value,{attr:o||n,bool:o}),o?(m(t,n),!1):void 0}),w(t)?!1:void 0):void 0})}function s(t,n,r){function o(){var t=N&&_?p:w||p;g(k.attributes,function(e){var n=e.value;b[y(e.name)]=ut.hasExpr(n)?ut(n,t):n}),g(Object.keys(F),function(e){b[y(e)]=ut(F[e],t)})}function i(t){for(var e in C)typeof p[e]!==tt&&A(p,e)&&(p[e]=t[e])}function u(){p.parent&&_&&g(Object.keys(p.parent),function(t){var e=!M(rt,t)&&M(P,t);(typeof p[t]===tt||e)&&(e||P.push(t),p[t]=p.parent[t])})}function a(t){p.update(t,!0)}function s(t){if(g(R,function(e){e[t?"mount":"unmount"]()}),w){var e=t?"on":"off";_?w[e]("unmount",p.unmount):w[e]("update",a)[e]("unmount",p.unmount)}}var l,p=V.observable(this),b=B(n.opts)||{},w=n.parent,_=n.isLoop,N=n.hasImpl,C=j(n.item),S=[],R=[],k=n.root,H=k.tagName.toLowerCase(),F={},P=[];t.name&&k._tag&&k._tag.unmount(!0),this.isMounted=!1,k.isLoop=_,k._tag=this,E(this,"_riot_id",++z),T(this,{parent:w,root:k,opts:b,tags:{}},C),g(k.attributes,function(t){var e=t.value;ut.hasExpr(e)&&(F[t.name]=e)}),l=at(t.tmpl,r),E(this,"update",function(t,e){return t=j(t),u(),t&&v(C)&&(i(t),C=t),T(p,t),o(),p.trigger("update",t),d(S,p),e&&p.parent?p.parent.one("updated",function(){p.trigger("updated")}):ft(function(){p.trigger("updated")}),this}),E(this,"mixin",function(){return g(arguments,function(t){var e;t=typeof t===Y?V.mixin(t):t,h(t)?(e=new t,t=t.prototype):e=t,g(Object.getOwnPropertyNames(t),function(t){"init"!=t&&(p[t]=h(e[t])?e[t].bind(p):e[t])}),e.init&&e.init.bind(p)()}),this}),E(this,"mount",function(){o();var e=V.mixin(Q);if(e&&p.mixin(e),t.fn&&t.fn.call(p,b),f(l,p,S),s(!0),t.attrs&&$(t.attrs,function(t,e){x(k,t,e)}),(t.attrs||N)&&f(p.root,p,S),p.parent&&!_||p.update(C),p.trigger("before-mount"),_&&!N)k=l.firstChild;else{for(;l.firstChild;)k.appendChild(l.firstChild);k.stub&&(k=w.root)}E(p,"root",k),_&&c(p.root,p.parent,null,!0),!p.parent||p.parent.isMounted?(p.isMounted=!0,p.trigger("mount")):p.parent.one("mount",function(){I(p.root)||(p.parent.isMounted=p.isMounted=!0,p.trigger("mount"))})}),E(this,"unmount",function(t){var n,r=k,o=r.parentNode,i=U.indexOf(p);if(p.trigger("before-unmount"),~i&&U.splice(i,1),this._virts&&g(this._virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),o){if(w)n=L(w),O(n.tags[H])?g(n.tags[H],function(t,e){t._riot_id==p._riot_id&&n.tags[H].splice(e,1)}):n.tags[H]=e;else for(;r.firstChild;)r.removeChild(r.firstChild);t?m(o,"riot-tag"):o.removeChild(r)}p.trigger("unmount"),s(),p.off("*"),p.isMounted=!1,delete k._tag}),c(l,this,R)}function l(e,n,r,o){r[e]=function(e){var i,u=o._parent,a=o._item;if(!a)for(;u&&!a;)a=u._item,u=u._parent;e=e||t.event,A(e,"currentTarget")&&(e.currentTarget=r),A(e,"target")&&(e.target=e.srcElement),A(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=a,n.call(o,e)===!0||/radio|check/.test(r.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(i=a?L(u):o,i.update())}}function p(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function d(t,e){g(t,function(t,n){var r=t.dom,o=t.attr,i=ut(t.expr,e),u=t.dom.parentNode;if(t.bool?(i=!!i,"selected"===o&&(r.__selected=i)):null==i&&(i=""),t.value!==i){if(t.value=i,!o)return i+="",void(u&&("TEXTAREA"===u.tagName?(u.value=i,ot||(r.nodeValue=i)):r.nodeValue=i));if("value"===o)return void(r.value=i);if(m(r,o),h(i))l(o,i,r,e);else if("if"==o){var a=t.stub,c=function(){p(a.parentNode,a,r)},f=function(){p(r.parentNode,r,a)};i?a&&(c(),r.inStub=!1,I(r)||R(r,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(a=t.stub=a||document.createTextNode(""),r.parentNode?f():(e.parent||e).one("updated",f),r.inStub=!0)}else"show"===o?r.style.display=i?"":"none":"hide"===o?r.style.display=i?"none":"":t.bool?(r[o]=i,i&&x(r,o,o)):(0===i||i&&typeof i!==J)&&(D(o,G)&&o!=W&&(o=o.slice(G.length)),x(r,o,i))}})}function g(t,e){for(var n,r=t?t.length:0,o=0;r>o;o++)n=t[o],null!=n&&e(n,o)===!1&&o--;return t}function h(t){return typeof t===et||!1}function v(t){return t&&typeof t===J}function m(t,e){t.removeAttribute(e)}function y(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function b(t,e){return t.getAttribute(e)}function x(t,e,n){t.setAttribute(e,n)}function w(t){return t.tagName&&Z[b(t,X)||b(t,W)||t.tagName.toLowerCase()]}function _(t,e,n){var r=n.tags[e];r?(O(r)||r!==t&&(n.tags[e]=[r]),M(n.tags[e],t)||n.tags[e].push(t)):n.tags[e]=t}function N(t,e,n){var r,o=t.parent;o&&(r=o.tags[e],O(r)?r.splice(n,0,r.splice(r.indexOf(t),1)[0]):_(t,e,o))}function C(t,e,n,r){var o=new s(t,e,n),i=S(e.root),u=L(r);return o.parent=u,o._parent=r,_(o,i,u),u!==r&&_(o,i,r),e.root.innerHTML="",o}function L(t){for(var e=t;!w(e.root)&&e.parent;)e=e.parent;return e}function E(t,e,n,r){return Object.defineProperty(t,e,T({value:n,enumerable:!1,writable:!1,configurable:!1},r)),t}function S(t){var e=w(t),n=b(t,"name"),r=n&&!ut.hasExpr(n)?n:e?e.name:t.tagName.toLowerCase();return r}function T(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var o in e)A(t,o)&&(t[o]=e[o]);return t}function M(t,e){return~t.indexOf(e)}function O(t){return Array.isArray(t)||t instanceof Array}function A(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===tt||n&&n.writable}function j(t){if(!(t instanceof s||t&&typeof t.trigger==et))return t;var e={};for(var n in t)M(rt,n)||(e[n]=t[n]);return e}function R(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)R(t,e),t=t.nextSibling}}function $(t,e){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function I(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function k(t){return document.createElement(t)}function H(t,e){return(e||document).querySelectorAll(t)}function F(t,e){return(e||document).querySelector(t)}function B(t){function e(){}return e.prototype=t,new e}function P(t){return b(t,"id")||b(t,"name")}function K(t,e,n){var r,o=P(t),i=function(i){M(n,o)||(r=O(i),i?(!r||r&&!M(i,t))&&(r?i.push(t):e[o]=[i,t]):e[o]=t)};o&&(ut.hasExpr(o)?e.one("mount",function(){o=P(t),i(e[o])}):i(e[o]))}function D(t,e){return t.slice(0,e.length)===e}function q(t,e,n){var r=Z[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",r&&t&&(r=new s(r,{root:t,opts:n},o)),r&&r.mount&&(r.mount(),M(U,r)||U.push(r)),r}var V={version:"v2.3.17",settings:{}},z=0,U=[],Z={},Q="__global_mixin",G="riot-",W=G+"tag",X="data-is",Y="string",J="object",tt="undefined",et="function",nt=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,rt=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],ot=0|(t&&t.document||{}).documentMode;V.observable=function(t){t=t||{};var e={},n=Array.prototype.slice,r=function(t,e){t.replace(/\S+/g,e)};return Object.defineProperties(t,{on:{value:function(n,o){return"function"!=typeof o?t:(r(n,function(t,n){(e[t]=e[t]||[]).push(o),o.typed=n>0}),t)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,o){return"*"!=n||o?r(n,function(t){if(o)for(var n,r=e[t],i=0;n=r&&r[i];++i)n==o&&r.splice(i--,1);else delete e[t]}):e={},t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(o){for(var i,u=arguments.length-1,a=new Array(u),c=0;u>c;c++)a[c]=arguments[c+1];return r(o,function(r){i=n.call(e[r]||[],0);for(var o,u=0;o=i[u];++u){if(o.busy)return;o.busy=1,o.apply(t,o.typed?[r].concat(a):a),i[u]!==o&&u--,o.busy=0}e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(a))}),t},enumerable:!1,writable:!1,configurable:!1}}),t},function(e){function n(t){return t.split(/[\/?#]/)}function r(t,e){var n=new RegExp("^"+e[C](/\*/g,"([^/?#]+?)")[C](/\.\./,".*")+"$"),r=t.match(n);return r?r.slice(1):void 0}function o(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function i(t){g=o(l,1),M[_](L,g),M[_](E,g),O[_]($,p),t&&l(!0)}function u(){this.$=[],e.observable(this),k.on("stop",this.s.bind(this)),k.on("emit",this.e.bind(this))}function a(t){return t[C](/^\/|\/$/,"")}function c(t){return"string"==typeof t}function f(t){return(t||j.href||"")[C](b,"")}function s(t){return"#"==h[0]?(t||j.href||"").split(h)[1]||"":f(t)[C](h,"")}function l(t){var e=0==B;if(!(B>=T)&&(B++,F.push(function(){var e=s();(t||e!=v)&&(k[S]("emit",e),v=e)}),e)){for(;F.length;)F[0](),F.shift();B=0}}function p(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[N]("download")||!e[N]("href")||e.target&&"_self"!=e.target||-1==e.href.indexOf(j.href.match(b)[0])||(e.href==j.href||e.href.split("#")[0]!=j.href.split("#")[0]&&("#"==h||0===f(e.href).indexOf(h))&&d(s(e.href),e.title||O.title))&&t.preventDefault()}}function d(t,e,n){return A?(t=h+a(t),e=e||O.title,n?A.replaceState(null,e,t):A.pushState(null,e,t),O.title=e,H=!1,l(),H):k[S]("emit",s(t))}var g,h,v,m,y,b=/^.+?\/+[^\/]+/,x="EventListener",w="remove"+x,_="add"+x,N="hasAttribute",C="replace",L="popstate",E="hashchange",S="trigger",T=3,M="undefined"!=typeof t&&t,O="undefined"!=typeof document&&document,A=M&&history,j=M&&(A.location||M.location),R=u.prototype,$=O&&O.ontouchstart?"touchstart":"click",I=!1,k=e.observable(),H=!1,F=[],B=0;R.m=function(t,e,n){!c(t)||e&&!c(e)?e?this.r(t,e):this.r("@",t):d(t,e,n||!1)},R.s=function(){this.off("*"),this.$=[]},R.e=function(t){this.$.concat("@").some(function(e){var n=("@"==e?m:y)(a(t),a(e));return"undefined"!=typeof n?(this[S].apply(null,[e].concat(n)),H=!0):void 0},this)},R.r=function(t,e){"@"!=t&&(t="/"+a(t),this.$.push(t)),this.on(t,e)};var P=new u,K=P.m.bind(P);K.create=function(){var t=new u;return t.m.stop=t.s.bind(t),t.m.bind(t)},K.base=function(t){h=t||"#",v=s()},K.exec=function(){l(!0)},K.parser=function(t,e){t||e||(m=n,y=r),t&&(m=t),e&&(y=e)},K.query=function(){var t={},e=j.href||v;return e[C](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},K.stop=function(){I&&(M&&(M[w](L,g),M[w](E,g),O[w]($,p)),k[S]("stop"),I=!1)},K.start=function(t){I||(M&&("complete"==document.readyState?i(t):M[_]("load",function(){setTimeout(function(){i(t)},1)})),I=!0)},K.base(),K.parser(),e.route=K}(V);var it=function(t){function e(t){return t}function n(t,e){return e||(e=m),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?f:"")}function r(t){if(t===g)return h;var e=t.split(" ");if(2!==e.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),e[4]=n(e[1].length>1?/{[\S\s]*?}/:h[4],e),e[5]=n(t.length>3?/\\({|})/g:h[5],e),e[6]=n(h[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+p,f),e[8]=t,e}function o(t){return t instanceof RegExp?a(t):m[t]}function i(t){(t||(t=g))!==m[8]&&(m=r(t),a=t===g?e:n,m[9]=a(h[9]),m[10]=a(h[10])),v=t}function u(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:i,get:function(){return v},enumerable:!0}),c=t,i(e)}var a,c,f="g",s=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,p=l.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,d={"(":RegExp("([()])|"+p,f),"[":RegExp("([[\\]])|"+p,f),"{":RegExp("([{}])|"+p,f)},g="{ }",h=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+p,f),g,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],v=t,m=[];return o.split=function(t,e,n){function r(t){e||u?f.push(t&&t.replace(n[5],"$1")):f.push(t)}function o(t,e,n){var r,o=d[e];for(o.lastIndex=n,n=1;(r=o.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:o.lastIndex}n||(n=m);var i,u,a,c,f=[],s=n[6];for(u=a=s.lastIndex=0;i=s.exec(t);){if(c=i.index,u){if(i[2]){s.lastIndex=o(t,i[2],s.lastIndex);continue}if(!i[3])continue}i[1]||(r(t.slice(a,c)),a=s.lastIndex,s=n[6+(u^=1)],s.lastIndex=a)}return t&&a<t.length&&r(t.slice(a)),f},o.hasExpr=function(t){return m[4].test(t)},o.loopKeys=function(t){var e=t.match(m[9]);return e?{key:e[1],pos:e[2],val:m[0]+e[3].trim()+m[1]}:{val:t.trim()}},o.hasRaw=function(t){return m[10].test(t)},o.array=function(t){return t?r(t):m},Object.defineProperty(o,"settings",{set:u,get:function(){return c}}),o.settings="undefined"!=typeof V&&V.settings||{},o.set=i,o.R_STRINGS=l,o.R_MLCOMMS=s,o.S_QBLOCKS=p,o}(),ut=function(){function e(t,e){return t?(a[t]||(a[t]=r(t))).call(e,n):t}function n(t,n){e.errorHandler&&(t.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},e.errorHandler(t))}function r(t){var e=o(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function o(t){var e,n=[],r=it.split(t.replace(/\u2057/g,'"'),1);if(r.length>2||r[0]){var o,u,a=[];for(o=u=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(a[u++]=e);e=2>u?a[0]:"["+a.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(f,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,o=1,i=s[e];for(i.lastIndex=n.lastIndex;r=i.exec(t);)if(r[0]===e)++o;else if(!--o)break;n.lastIndex=o?t.length:i.lastIndex}if("="===t[0]&&(t=t.slice(1)),t=t.replace(c,function(t,e){return t.length>2&&!e?""+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var o,i=[],a=0;t&&(o=t.match(l))&&!o.index;){var f,p,d=/,|([[{(])|$/g;for(t=RegExp.rightContext,f=o[2]?n[o[2]].slice(1,-1).trim().replace(/\s+/g," "):o[1];p=(o=d.exec(t))[1];)r(p,d);p=t.slice(0,o.index),t=RegExp.rightContext,i[a++]=u(p,1,f)}t=a?a>1?"["+i.join(",")+'].join(" ").trim()':i[0]:u(t,e)}return t}function u(t,e,n){var r;return t=t.replace(d,function(t,e,n,o,i){return n&&(o=r?0:o+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+p+n,o&&(r="."===(i=i[o])||"("===i||"["===i)):o&&(r=!g.test(i.slice(o)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};e.haveRaw=it.hasRaw,e.hasExpr=it.hasExpr,e.loopKeys=it.loopKeys,e.errorHandler=null;var c=RegExp(it.S_QBLOCKS,"g"),f=/\x01(\d+)~/g,s={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},l=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,p='"in this?this:'+("object"!=typeof t?"global":"window")+").",d=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,g=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.parse=function(t){return t},e.version=it.version="v2.3.21",e}(),at=function t(){function t(t,r){var o=t&&t.match(/^\s*<([-\w]+)/),i=o&&o[1].toLowerCase(),u=k("div");return t=n(t,r),c.test(i)?u=e(u,t,i):u.innerHTML=t,u.stub=!0,u}function e(t,e,n){var r="o"===n[0],o=r?"select>":"table>";if(t.innerHTML="<"+o+e.trim()+"</"+o,o=t.firstChild,r)o.selectedIndex=-1;else{var i=a[n];i&&1===o.childElementCount&&(o=F(i,o))}return o}function n(t,e){if(!r.test(t))return t;var n={};return e=e&&e.replace(i,function(t,e,r){return n[e]=n[e]||r,""}).trim(),t.replace(u,function(t,e,r){return n[e]||r||""}).replace(o,function(t,n){return e||n||""})}var r=/<yield\b/i,o=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,i=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,u=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,a={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},c=ot&&10>ot?nt:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return t}(),ct=function(e){if(!t)return{add:function(){},inject:function(){}};var n=function(){var t=k("style");x(t,"type","text/css");var e=F("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),r=n.styleSheet,o="";return Object.defineProperty(e,"styleNode",{value:n,writable:!0}),{add:function(t){o+=t},inject:function(){o&&(r?r.cssText+=o:n.innerHTML+=o,o="")}}}(V),ft=function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;if(!e||/iP(ad|hone|od).*OS 6/.test(t.navigator.userAgent)){var n=0;e=function(t){var e=Date.now(),r=Math.max(16-(e-n),0);setTimeout(function(){t(n=e+r)},r)}}return e}(t||{});V.util={brackets:it,tmpl:ut},V.mixin=function(){var t={};return function(e,n){return v(e)?(n=e,void(t[Q]=T(t[Q]||{},n))):n?void(t[e]=n):t[e]}}(),V.tag=function(t,e,n,r,o){return h(r)&&(o=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(h(n)?o=n:ct.add(n)),t=t.toLowerCase(),Z[t]={name:t,tmpl:e,attrs:r,fn:o},t},V.tag2=function(t,e,n,r,o){return n&&ct.add(n),Z[t]={name:t,tmpl:e,attrs:r,fn:o},t},V.mount=function(t,e,n){function r(t){var e="";return g(t,function(t){/[^-\w]/.test(t)||(t=t.trim().toLowerCase(),e+=",["+X+'="'+t+'"],['+W+'="'+t+'"]')}),e}function o(){var t=Object.keys(Z);return t+r(t)}function i(t){if(t.tagName){var r=b(t,X)||b(t,W);e&&r!==e&&(r=e,x(t,X,e));var o=q(t,r||t.tagName.toLowerCase(),n);o&&c.push(o)}else t.length&&g(t,i)}var u,a,c=[];if(ct.inject(),v(e)&&(n=e,e=0),typeof t===Y?("*"===t?t=a=o():t+=r(t.split(/, */)),u=t?H(t):[]):u=t,"*"===e){if(e=a||o(),u.tagName)u=H(e,u);else{var f=[];g(u,function(t){f.push(H(e,t))}),u=f}e=0}return i(u),c},V.update=function(){return g(U,function(t){t.update()})},V.Tag=s,typeof exports===J?module.exports=V:typeof define===et&&typeof define.amd!==tt?define(function(){return V}):t.riot=V}("undefined"!=typeof window?window:void 0);
var kemo=function(a){a.core=a.core||{};a.core.ready=function(a){"loading"!=document.readyState?a():document.addEventListener("DOMContentLoaded",a)};return a}(kemo||{}),kemo=function(a){a.client=a.client||{};a.client.comm=a.client.comm||{};var c=function(b,a){var c="";try{c=sjcl.decrypt("clientenc"+b+"salt",a)}catch(d){console.error("Unexpected error when decrypting received message.",d)}return c},e=function(b){var a="",a="http:"===location.protocol?"8080"===location.port?"ws://"+location.host:"ws://"+
location.hostname+":8000":"wss://"+location.hostname+":8443";return a+"/messaging/"+encodeURIComponent(sjcl.codec.base64.fromBits(sjcl.hash.sha256.hash("littlebitof"+b+"salt")))};a.client.comm.Messaging=function(b){var a=this;a.key=b;a.ws=null;a.connect=function(b,d){try{a.key=b,a.ws&&1===a.ws.readyState&&a.ws.close(),a.ws=new WebSocket(e(b)),a.ws.onopen=function(){a.ws.onmessage=function(b){a.onmessage(c(a.key,b.data))};d&&d()}}catch(h){}};a.onmessage=function(a){};a.send=function(b,c){1!==a.ws.readyState||
a.key!==b?a.connect(b,function(){a.ws.send(sjcl.encrypt("clientenc"+b+"salt",c))}):a.ws.send(sjcl.encrypt("clientenc"+b+"salt",c))};a.connectionCheck=function(){a.ws&&1!==a.ws.readyState&&a.connect(a.key);setTimeout(a.connectionCheck,5E3)};return a};return a}(kemo||{}),kemo=function(a){a.client=a.client||{};a.client.view=a.client.view||{};a.client.view.util=a.client.view.util||{};var c=a.client.view.util;a.client.view.mountKemoChat=function(a,b){return riot.mount(a,{page:b})[0]};riot.tag2("kemo-chat",
'\t\t\t\x3cdiv\x3e\t\t\t\t\x3cdiv class\x3d"row"\x3e\t\t\t\t\t\x3cinput type\x3d"password" kemo-type\x3d"key" value\x3d{key} onchange\x3d"{onKeyChanged}" onblur\x3d"{onKeyChanged}" class\x3d"key-field"/\x3e\t\t\t\t\x3c/div\x3e\t\t\t\t\x3cdiv class\x3d"row"\x3e\t\t\t\t\t\x3cdiv kemo-type\x3d"messages" class\x3d"messages-box"\x3e\t\t\t\t\t\t\x3cchat-line each\x3d{messages.items}\x3e\x3c/chat-line\x3e\t\t\t\t\t\x3c/div\x3e\t\t\t\t\x3c/div\x3e\t\t\t\t\x3cdiv class\x3d"row"\x3e\t\t\t\t\t\x3cdiv class\x3d"ten columns"\x3e\t\t\t\t\t\t\x3cinput type\x3d"text" kemo-type\x3d"message" class\x3d"message-box" onkeypress\x3d"{onMessageKeyPress}"/\x3e\t\t\t\t\t\x3c/div\x3e\t\t\t\t\t\x3cdiv class\x3d"two columns"\x3e\t\t\t\t\t\t\x3cbutton class\x3d"send-btn button-primary" kemo-type\x3d"send-btn" onclick\x3d"{onSendMessage}"\x3eSend\x3c/button\x3e\t\t\t\t\t\x3c/div\x3e\t\t\t\t\x3c/div\x3e\t\t\t\x3c/div\x3e',
"","",function(a){var b=this;b.page=a.page;b.id=b.root.getAttribute("id");b.key=b.root.getAttribute("key");b.max_messages=15;b.messages=new c.MiniQueue(b.max_messages,{empty:!0});b.sentMessages=new c.MiniQueue(b.max_messages);b.on("mount",function(){b.keyInp=b.root.querySelectorAll('input[kemo-type\x3d"key"]')[0];b.messagesDiv=b.root.querySelectorAll('div[kemo-type\x3d"messages"]')[0];b.messageInp=b.root.querySelectorAll('input[kemo-type\x3d"message"]')[0];b.sendBtn=b.root.querySelectorAll('button[kemo-type\x3d"send-btn"]')[0];
b.page.trigger("messaging-connect",{source:b,key:b.keyInp.value})});var f=function(){var a={source:b,key:b.keyInp.value,message:b.messageInp.value};b.page.trigger("messaging-send",a);b.sentMessages.add(a.message);b.messageInp.value=""};b.onSendMessage=function(a){f()}.bind(this);b.onKeyChanged=function(a){b.page.trigger("ui-key-changed",b.keyInp.value);return!0}.bind(this);b.onMessageKeyPress=function(a){13===(a.which||a.keyCode)&&f();return!0}.bind(this);b.on("ui-received",function(a){var c;c=!1;
if(a){var e=b.sentMessages.items.indexOf(a);-1<e&&(c=!0,b.sentMessages.items.splice(e,1))}b.messages.add({sent:c,message:a});b.update();b.messagesDiv.scrollTop=b.messagesDiv.scrollHeight;c||b.page.trigger("ui-received-new")})},"{ }");riot.tag("chat-line",'\t\t\t\x3cdiv if\x3d{!empty} class\x3d"{sent: sent}"\x3e{message}\x3c/div\x3e\t\t\t\x3cdiv if\x3d{empty} \x3e\x26nbsp;\x3c/div\x3e\t\t\t',"","",function(a){},"{ }");c.MiniQueue=function(a,b){this.size=a||20;this.items=[];if(b)for(var c=0;c<a;c++)this.items.push({empty:!0});
return this};c.MiniQueue.prototype.add=function(a){this.items.push(a);this.items.length>this.size&&this.items.shift();return this};return a}(kemo||{}),kemo=function(a){a.client=a.client||{};a.client.ext=a.client.ext||{};a.client.ext.TitleNotification=function(){var a=this;riot.observable(a);a.titleElem=document.getElementsByTagName("title")[0];a.notifCount=0;a.titleElem.text+=" (-.-)";a.on("ui-received-new",function(){a.notifCount++;a.titleElem.text.endsWith(" (o.o)")||(a.titleElem.text=a.titleElem.text.replace(" (-.-)",
" (o.o)"));setTimeout(a.tryHide,6E5)});a.tryHide=function(){a.notifCount--;0===a.notifCount&&a.hide()};a.hide=function(){a.titleElem.text.endsWith(" (o.o)")&&(a.titleElem.text=a.titleElem.text.replace(" (o.o)"," (-.-)"))};window.addEventListener("focus",a.hide);window.addEventListener("blur",a.hide);window.addEventListener("message",function(e){"ui-focus"===e.data&&a.hide()},!1);return a};return a}(kemo||{}),kemo=function(a){a.client=a.client||{};var c=a.client.view,e=a.client.comm,b=a.client.ext,
f=function(){window.parent&&window.parent.postMessage("ui-focus","*")};a.core.ready(function(){riot.observable(a.client);var g=c.mountKemoChat("#public-chat",a.client),d=new e.Messaging(g.key),h=new b.TitleNotification;d.connect(g.key,function(){g.trigger("update")});d.onmessage=function(a){g.trigger("ui-received",a)};a.client.on("messaging-send",function(a){d.send(a.key,a.message)});a.client.on("ui-key-changed",function(a){d.connect(a)});a.client.on("messaging-connect",function(a){d.connect(a.key)});
a.client.on("ui-received-new",function(){h.trigger("ui-received-new");window.parent&&window.parent.postMessage("ui-received-new","*")});window.addEventListener("focus",f);window.addEventListener("blur",f);setTimeout(d.connectionCheck,5E3);a.client.chatUi=g;a.client.messaging=d});return a}(kemo||{});
